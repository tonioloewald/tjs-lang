# Using Haltija with tjs-lang

This project uses [Haltija](https://github.com/tonioloewald/haltija) for AI-assisted browser debugging and testing.

## Quick Start

```bash
# Terminal 1: Start tjs-lang playground
bun run dev

# Terminal 2: Start haltija
cd ~/Documents/GitHub/haltija
bunx haltija
```

Then add this one-liner to your browser console or the app's entry point:

```javascript
;/^localhost$|^127\./.test(location.hostname) &&
  import('http://localhost:8700/dev.js')
```

## Why We Use It

Before haltija, debugging frontend issues was painful:

1. Describe what's wrong → AI guesses → doesn't work → repeat
2. Screenshots, copy-pasted HTML, "it's still not working"
3. Context lost, velocity destroyed

With haltija:

1. AI sees the actual DOM via `/tree`
2. Understands immediately: "the selector expects `.tab-bar > .active` but structure is `.tab-bar > .tab-container > .tab.active`"
3. Fixes it in one shot

## Common Commands

```bash
# What page am I on?
curl http://localhost:8700/location

# See DOM structure
curl -X POST http://localhost:8700/tree -d '{"selector":"body","depth":3}'

# Find all buttons
curl -X POST http://localhost:8700/inspectAll -d '{"selector":"button"}'

# Click something
curl -X POST http://localhost:8700/click -d '{"selector":"#submit"}'

# Watch for DOM changes
curl -X POST http://localhost:8700/mutations/watch -d '{"preset":"smart"}'
curl http://localhost:8700/messages

# Full docs
curl http://localhost:8700/docs
```

## Semantic Events (for debugging)

Instead of raw DOM events, haltija captures meaningful actions:

- `input:typed` - "user typed 'hello@example.com'"
- `interaction:click` - "user clicked Submit button"
- `navigation:navigate` - "user went from /login to /dashboard"

```bash
curl -X POST http://localhost:8700/events/watch -d '{"preset":"interactive"}'
curl http://localhost:8700/events
```

## Reference Docs

```bash
# List available docs
curl http://localhost:8700/docs/list

# UX anti-patterns database
curl http://localhost:8700/docs/ux-crimes
```

## Repo Location

Haltija source: `~/Documents/GitHub/haltija`
